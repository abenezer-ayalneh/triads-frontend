<div
	class="w-full h-full rounded-lg px-4 py-2 md:px-6 md:py-4 shadow-md transition-all relative overflow-hidden bg-neutral-100"
	[class.bg-neutral-400]="!triadGroup().active"
	[class.bg-neutral-100]="triadGroup().active">
	<!-- Difficulty Badge (Top Right Corner) -->
	<div
		class="absolute top-0 right-0 text-white text-xs md:text-sm font-bold shadow-lg"
		[ngClass]="getDifficultyBadgeColor()"
		style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 85%); padding: 8px 16px 12px 20px; transform: translate(8px, -8px) rotate(12deg)">
		<div class="transform -rotate-12 whitespace-nowrap">
			{{ getDifficultyText() }}
		</div>
	</div>

	<!-- Triads Display -->
	<div class="flex flex-col md:flex-row gap-2 md:gap-0 mb-4">
		<!-- Triad 1 -->
		@if (triadGroup().triad1) {
			<div class="flex-1 flex flex-col">
				<p class="text-gray-700 font-bold text-sm md:text-base mb-2">{{ triadGroup().triad1.keyword }}</p>
				<div class="flex flex-col gap-1">
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad1.fullPhrases[0] | highlightKey: triadGroup().triad1.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad1.fullPhrases[1] | highlightKey: triadGroup().triad1.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad1.fullPhrases[2] | highlightKey: triadGroup().triad1.keyword : 'text-gray-700'"></p>
				</div>
			</div>
		}

		<!-- Vertical Divider (Solid) -->
		<div class="hidden md:block w-px bg-gray-400 mx-2"></div>

		<!-- Triad 2 -->
		@if (triadGroup().triad2) {
			<div class="flex-1 flex flex-col">
				<p class="text-gray-700 font-bold text-sm md:text-base mb-2">{{ triadGroup().triad2.keyword }}</p>
				<div class="flex flex-col gap-1">
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad2.fullPhrases[0] | highlightKey: triadGroup().triad2.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad2.fullPhrases[1] | highlightKey: triadGroup().triad2.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad2.fullPhrases[2] | highlightKey: triadGroup().triad2.keyword : 'text-gray-700'"></p>
				</div>
			</div>
		}

		<!-- Vertical Divider (Solid) -->
		<div class="hidden md:block w-px bg-gray-400 mx-2"></div>

		<!-- Triad 3 -->
		@if (triadGroup().triad3) {
			<div class="flex-1 flex flex-col">
				<p class="text-gray-700 font-bold text-sm md:text-base mb-2">{{ triadGroup().triad3.keyword }}</p>
				<div class="flex flex-col gap-1">
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad3.fullPhrases[0] | highlightKey: triadGroup().triad3.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad3.fullPhrases[1] | highlightKey: triadGroup().triad3.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad3.fullPhrases[2] | highlightKey: triadGroup().triad3.keyword : 'text-gray-700'"></p>
				</div>
			</div>
		}

		<!-- Vertical Divider (Dashed) -->
		<div class="hidden md:block w-px border-l-2 border-dashed border-gray-400 mx-2"></div>

		<!-- Triad 4 -->
		@if (triadGroup().triad4) {
			<div class="flex-1 flex flex-col">
				<p class="text-gray-700 font-bold text-sm md:text-base mb-2">{{ triadGroup().triad4.keyword }}</p>
				<div class="flex flex-col gap-1">
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad4.fullPhrases[0] | highlightKey: triadGroup().triad4.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad4.fullPhrases[1] | highlightKey: triadGroup().triad4.keyword : 'text-gray-700'"></p>
					<p
						class="text-gray-700 text-xs md:text-sm ml-2"
						[innerHTML]="triadGroup().triad4.fullPhrases[2] | highlightKey: triadGroup().triad4.keyword : 'text-gray-700'"></p>
				</div>
			</div>
		}
	</div>

	<!-- Action Buttons -->
	<div class="w-full h-fit flex justify-end py-2 border-t border-gray-300">
		<div class="flex flex-wrap gap-2 justify-end">
			<button
				type="button"
				(click)="onEdit()"
				class="px-3 md:px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-xs md:text-sm font-medium">
				Edit
			</button>
			<button
				type="button"
				(click)="onToggleStatus()"
				[class.bg-gray-500]="triadGroup().active"
				[class.hover:bg-gray-600]="triadGroup().active"
				[class.bg-green-500]="!triadGroup().active"
				[class.hover:bg-green-600]="!triadGroup().active"
				class="px-3 md:px-4 py-2 text-white rounded-lg transition-colors text-xs md:text-sm font-medium">
				{{ triadGroup().active ? 'Deactivate' : 'Activate' }}
			</button>
			<button
				type="button"
				(click)="onDelete()"
				class="px-3 md:px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-xs md:text-sm font-medium">
				Delete
			</button>
		</div>
	</div>
</div>
