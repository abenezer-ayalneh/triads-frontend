<app-dialog #dialogBody title="Edit Triad Group" (whenClosed)="onClose()">
	<form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="space-y-4 landscape:max-md:space-y-4 md:space-y-6">
		<!-- Validation Errors -->
		@if (validationErrors().length > 0) {
			<div class="bg-red-50 border border-red-200 rounded-lg p-3 landscape:max-md:p-3 md:p-4">
				<ul class="list-disc list-inside text-red-700 text-xs landscape:max-md:text-xs md:text-sm space-y-1">
					@for (error of validationErrors(); track $index) {
						<li>{{ error }}</li>
					}
				</ul>
			</div>
		}

		<!-- Difficulty Selection -->
		<div class="border border-gray-200 rounded-lg p-3 landscape:max-md:p-3 md:p-4">
			<label
				for="edit-difficulty"
				class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1.5 landscape:max-md:mb-1.5 md:mb-2"
				>Difficulty Level</label
			>
			<select
				id="edit-difficulty"
				formControlName="difficulty"
				class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-white text-xs landscape:max-md:text-xs md:text-base"
				[class.border-red-500]="formGroup.get('difficulty')?.invalid && formGroup.get('difficulty')?.touched">
				<option value="">Select difficulty</option>
				<option [value]="Difficulty.EASY">Easy</option>
				<option [value]="Difficulty.MEDIUM">Medium</option>
				<option [value]="Difficulty.HARD">Hard</option>
			</select>
		</div>

		<!-- Triad 1 -->
		<div class="border border-gray-200 rounded-lg p-3 landscape:max-md:p-3 md:p-4" formGroupName="triad1">
			<h3 class="font-bold text-sm landscape:max-md:text-sm md:text-lg mb-3 landscape:max-md:mb-3 md:mb-4 text-gray-800">Triad 1</h3>
			<div class="space-y-3 landscape:max-md:space-y-3 md:space-y-4">
				<div>
					<label for="edit-triad1-keyword" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1">Keyword</label>
					<input
						id="edit-triad1-keyword"
						type="text"
						formControlName="keyword"
						appAutoCapitalize
						class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
						[class.border-red-500]="triad1Group.get('keyword')?.invalid && triad1Group.get('keyword')?.touched" />
				</div>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-2 landscape:max-md:gap-2 md:gap-4">
					<div>
						<label for="edit-triad1-fullPhrase1" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 1</label
						>
						<input
							id="edit-triad1-fullPhrase1"
							type="text"
							formControlName="fullPhrase1"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad1Group.get('fullPhrase1')?.invalid && triad1Group.get('fullPhrase1')?.touched" />
					</div>
					<div>
						<label for="edit-triad1-fullPhrase2" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 2</label
						>
						<input
							id="edit-triad1-fullPhrase2"
							type="text"
							formControlName="fullPhrase2"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad1Group.get('fullPhrase2')?.invalid && triad1Group.get('fullPhrase2')?.touched" />
					</div>
					<div>
						<label for="edit-triad1-fullPhrase3" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 3</label
						>
						<input
							id="edit-triad1-fullPhrase3"
							type="text"
							formControlName="fullPhrase3"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad1Group.get('fullPhrase3')?.invalid && triad1Group.get('fullPhrase3')?.touched" />
					</div>
				</div>
			</div>
		</div>

		<!-- Triad 2 -->
		<div class="border border-gray-200 rounded-lg p-3 landscape:max-md:p-3 md:p-4" formGroupName="triad2">
			<h3 class="font-bold text-sm landscape:max-md:text-sm md:text-lg mb-3 landscape:max-md:mb-3 md:mb-4 text-gray-800">Triad 2</h3>
			<div class="space-y-3 landscape:max-md:space-y-3 md:space-y-4">
				<div>
					<label for="edit-triad2-keyword" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1">Keyword</label>
					<input
						id="edit-triad2-keyword"
						type="text"
						formControlName="keyword"
						appAutoCapitalize
						class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
						[class.border-red-500]="triad2Group.get('keyword')?.invalid && triad2Group.get('keyword')?.touched" />
				</div>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-2 landscape:max-md:gap-2 md:gap-4">
					<div>
						<label for="edit-triad2-fullPhrase1" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 1</label
						>
						<input
							id="edit-triad2-fullPhrase1"
							type="text"
							formControlName="fullPhrase1"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad2Group.get('fullPhrase1')?.invalid && triad2Group.get('fullPhrase1')?.touched" />
					</div>
					<div>
						<label for="edit-triad2-fullPhrase2" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 2</label
						>
						<input
							id="edit-triad2-fullPhrase2"
							type="text"
							formControlName="fullPhrase2"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad2Group.get('fullPhrase2')?.invalid && triad2Group.get('fullPhrase2')?.touched" />
					</div>
					<div>
						<label for="edit-triad2-fullPhrase3" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 3</label
						>
						<input
							id="edit-triad2-fullPhrase3"
							type="text"
							formControlName="fullPhrase3"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad2Group.get('fullPhrase3')?.invalid && triad2Group.get('fullPhrase3')?.touched" />
					</div>
				</div>
			</div>
		</div>

		<!-- Triad 3 -->
		<div class="border border-gray-200 rounded-lg p-3 landscape:max-md:p-3 md:p-4" formGroupName="triad3">
			<h3 class="font-bold text-sm landscape:max-md:text-sm md:text-lg mb-3 landscape:max-md:mb-3 md:mb-4 text-gray-800">Triad 3</h3>
			<div class="space-y-3 landscape:max-md:space-y-3 md:space-y-4">
				<div>
					<label for="edit-triad3-keyword" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1">Keyword</label>
					<input
						id="edit-triad3-keyword"
						type="text"
						formControlName="keyword"
						appAutoCapitalize
						class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
						[class.border-red-500]="triad3Group.get('keyword')?.invalid && triad3Group.get('keyword')?.touched" />
				</div>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-2 landscape:max-md:gap-2 md:gap-4">
					<div>
						<label for="edit-triad3-fullPhrase1" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 1</label
						>
						<input
							id="edit-triad3-fullPhrase1"
							type="text"
							formControlName="fullPhrase1"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad3Group.get('fullPhrase1')?.invalid && triad3Group.get('fullPhrase1')?.touched" />
					</div>
					<div>
						<label for="edit-triad3-fullPhrase2" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 2</label
						>
						<input
							id="edit-triad3-fullPhrase2"
							type="text"
							formControlName="fullPhrase2"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad3Group.get('fullPhrase2')?.invalid && triad3Group.get('fullPhrase2')?.touched" />
					</div>
					<div>
						<label for="edit-triad3-fullPhrase3" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 3</label
						>
						<input
							id="edit-triad3-fullPhrase3"
							type="text"
							formControlName="fullPhrase3"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad3Group.get('fullPhrase3')?.invalid && triad3Group.get('fullPhrase3')?.touched" />
					</div>
				</div>
			</div>
		</div>

		<!-- Triad 4 -->
		<div class="border border-gray-200 rounded-lg p-3 landscape:max-md:p-3 md:p-4" formGroupName="triad4">
			<h3 class="font-bold text-sm landscape:max-md:text-sm md:text-lg mb-3 landscape:max-md:mb-3 md:mb-4 text-gray-800">Triad 4</h3>
			<div class="space-y-3 landscape:max-md:space-y-3 md:space-y-4">
				<div>
					<label for="edit-triad4-keyword" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1">Keyword</label>
					<input
						id="edit-triad4-keyword"
						type="text"
						formControlName="keyword"
						appAutoCapitalize
						class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
						[class.border-red-500]="triad4Group.get('keyword')?.invalid && triad4Group.get('keyword')?.touched" />
				</div>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-2 landscape:max-md:gap-2 md:gap-4">
					<div>
						<label for="edit-triad4-fullPhrase1" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 1</label
						>
						<input
							id="edit-triad4-fullPhrase1"
							type="text"
							formControlName="fullPhrase1"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad4Group.get('fullPhrase1')?.invalid && triad4Group.get('fullPhrase1')?.touched" />
					</div>
					<div>
						<label for="edit-triad4-fullPhrase2" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 2</label
						>
						<input
							id="edit-triad4-fullPhrase2"
							type="text"
							formControlName="fullPhrase2"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad4Group.get('fullPhrase2')?.invalid && triad4Group.get('fullPhrase2')?.touched" />
					</div>
					<div>
						<label for="edit-triad4-fullPhrase3" class="block text-xs landscape:max-md:text-xs md:text-sm font-medium text-gray-700 mb-1"
							>Word 3</label
						>
						<input
							id="edit-triad4-fullPhrase3"
							type="text"
							formControlName="fullPhrase3"
							appAutoCapitalize
							class="w-full px-2 landscape:max-md:px-2 md:px-3 py-1.5 landscape:max-md:py-1.5 md:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-xs landscape:max-md:text-xs md:text-base"
							[class.border-red-500]="triad4Group.get('fullPhrase3')?.invalid && triad4Group.get('fullPhrase3')?.touched" />
					</div>
				</div>
			</div>
		</div>

		<!-- Dialog Actions -->
		<div class="flex gap-2 landscape:max-md:gap-2 md:gap-3 justify-end pt-3 landscape:max-md:pt-3 md:pt-4 border-t border-gray-200">
			<button type="button" (click)="onClose()" class="btn btn-xs landscape:max-md:btn-xs md:btn-md btn-ghost px-3 landscape:max-md:px-3 md:px-6">
				Cancel
			</button>
			<button
				type="submit"
				[disabled]="formGroup.invalid || validationErrors().length > 0"
				class="btn btn-xs landscape:max-md:btn-xs md:btn-md btn-primary px-3 landscape:max-md:px-3 md:px-6 disabled:opacity-50 disabled:cursor-not-allowed">
				Update
			</button>
		</div>
	</form>
</app-dialog>
