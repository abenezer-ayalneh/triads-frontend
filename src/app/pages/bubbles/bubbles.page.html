<div #bubblesContainer class="w-full h-full relative overflow-hidden">
	<!-- Background bubbles -->
	<div class="background-bubbles">
		@for (i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]; track i) {
			<div
				class="background-bubble"
				[style.left]="((i * 7) % 100) + '%'"
				[style.top]="((i * 11) % 100) + '%'"
				[style.animation-delay]="i * 0.3 + 's'"></div>
		}
	</div>

	<!-- Game bubbles -->
	@for (bubble of bubbles(); track bubble.id) {
		<div
			class="game-bubble circle"
			[class.selected]="selectedBubbleIds().includes(bubble.id)"
			[ngStyle]="getBubbleStyle(bubble)"
			(click)="onBubbleClick(bubble)">
			<!-- Lottie Animation Container -->
			<div class="lottie-container"></div>

			<!-- Bubble text -->
			<span class="bubble-text">{{ bubble.text }}</span>
		</div>
	}

	<!-- Collected KEY stack -->
	<div class="collected-keys">
		@for (k of collectedKeys(); track k.id) {
			<span class="key-chip">{{ k.text }}</span>
		}
	</div>
</div>
